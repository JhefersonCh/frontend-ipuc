<nav class="nav brand-navigation-center p-0 md:pt-[15px]">
  <article
    class="color-nav flex content-between w-full md:w-[70%] h-full rounded-none md:rounded-lg px-[2vw]"
  >
    <section class="flex content-start w-[50%] justify-start items-center">
      <div class="flex content-start justify-start text-start">
        <img
          [src]="logo() || '../../../../assets/images/LOGO-IPUC.svg'"
          alt="Logo IPUC"
          class="w-[75px] h-[50px] cursor-pointer hover:scale-110 transition-transform duration-300"
          routerLink="/"
        />
      </div>
    </section>
    <section class="w-[50%] flex justify-end md:justify-center items-center">
      <!-- Menú de escritorio -->
      <div
        class="hidden sm:flex w-full content-between justify-end items-center text-center text-gray-100 font-medium gap-2 text-sm"
      >
        <a
          routerLink="/home"
          routerLinkActive="bg-blue-500"
          class="py-[15px] max-[1280px]:py-0 sm:h-[60px] md:h-[45px] lg:h-[45px] xl:h-full px-[6px] w-[25%] rounded-lg transition-colors duration-200 ease-in-out hover:bg-blue-500 flex justify-center items-center"
        >
          Inicio
        </a>

        <a
          routerLink="/social/forum"
          [ngClass]="{ 'bg-blue-500': isActive('/social') }"
          class="py-[15px] max-[1280px]:py-0 sm:h-[60px] md:h-[45px] lg:h-[45px] xl:h-full px-[6px] w-[25%] rounded-lg transition-colors duration-200 ease-in-out hover:bg-blue-500 flex justify-center items-center"
          >Foro</a
        >
        <a
          routerLink="/public/about"
          routerLinkActive="bg-blue-500"
          class="py-[15px] max-[1289px]:py-[6px] sm:h-[60px] md:h-[45px] lg:h-[45px] xl:h-full px-[6px] w-[25%] rounded-lg transition-colors duration-200 ease-in-out hover:bg-blue-500 flex justify-center items-center"
          >Sobre Nosotros</a
        >
        @if(!loading() || currentUser()){ @if(!currentUser()){
        <a
          routerLink="/auth/login"
          routerLinkActive="bg-blue-500"
          class="py-[15px] max-[1289px]:py-[6px] sm:h-[60px] md:h-[45px] lg:h-[45px] xl:h-full px-[6px] w-[25%] rounded-lg transition-colors duration-200 ease-in-out hover:bg-blue-500 flex justify-center items-center"
          >Iniciar Sesión</a
        >
        }@else {
        <button
          [matMenuTriggerFor]="menu"
          type="button"
          [ngClass]="{ 'bg-blue-500': isActive('/user/profile') }"
          class="py-[15px] max-[1280px]:py-0 sm:h-[60px] md:h-[45px] lg:h-[45px] xl:h-full w-[25%] rounded-lg transition-colors duration-200 ease-in-out hover:bg-white/10 cursor-pointer"
        >
          {{ currentUser()?.username }}
        </button>

        <mat-menu #menu="matMenu">
          <button mat-menu-item routerLink="/user/profile">
            <mat-icon>account_circle</mat-icon>Perfil
          </button>
          @if(currentUser()?.role === 'admin') {
          <button mat-menu-item routerLink="/admin/configuration">
            <mat-icon>settings</mat-icon>Configuración
          </button>
          }
          <button mat-menu-item (click)="logout.emit()">
            <mat-icon>logout</mat-icon>Cerrar sesión
          </button> </mat-menu
        >} }@else {
        <div class="py-[15px] w-[25%] flex justify-center items-center">
          <mat-spinner></mat-spinner>
        </div>
        }
      </div>

      <!-- Menú Mobile -->
      <div class="sm:hidden">
        <button
          [matMenuTriggerFor]="mobileMenu"
          class="text-gray-300 text-xl px-[4vw]"
        >
          <mat-icon>menu</mat-icon>
        </button>
        <mat-menu #mobileMenu="matMenu">
          <a
            routerLink="/home"
            mat-menu-item
            class="flex justify-center items-center"
            (click)="menuClose()"
            ><mat-icon>home</mat-icon>Inicio</a
          >
          <a
            routerLink="/public/about"
            mat-menu-item
            class="flex justify-center items-center"
            (click)="menuClose()"
            ><mat-icon>person_pin</mat-icon>Sobre Nosotros</a
          >

          @if(!loading()){ @if(!currentUser()){

          <a
            routerLink="/auth/login"
            mat-menu-item
            class="flex justify-center items-center"
            (click)="menuClose()"
            ><mat-icon>login</mat-icon>Iniciar Sesión</a
          >
          }@else {
          <a
            routerLink="/social/forum"
            mat-menu-item
            class="flex justify-center items-center"
            (click)="menuClose()"
            ><mat-icon>forum</mat-icon>Foro</a
          >
          <button
            [matMenuTriggerFor]="menu"
            type="button"
            mat-menu-item
            class="flex justify-center items-center"
          >
            <mat-icon>settings</mat-icon>Opciones
            <!-- {{ currentUser()?.username }} -->
          </button>

          <mat-menu #menu="matMenu">
            <button mat-menu-item routerLink="/user/profile">
              <mat-icon>account_circle</mat-icon>Perfil
            </button>
            @if(currentUser()?.role === 'admin') {
            <button mat-menu-item routerLink="/admin/configuration">
              <mat-icon>settings</mat-icon>Configuración
            </button>
            }
            <button mat-menu-item (click)="logout.emit()">
              <mat-icon>logout</mat-icon>Cerrar sesión
            </button> </mat-menu
          >} }@else {
          <div mat-menu-item>
            <mat-spinner></mat-spinner>
          </div>
          }
        </mat-menu>
      </div>
    </section>
  </article>
</nav>
