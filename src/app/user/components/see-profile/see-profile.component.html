<article class="brand-content-center">
  @if (!isLoading) {
  <article class="flex flex-col w-[90%] md:w-full h-full gap-5 p-5 md:p-10">
    <section class="flex flex-col items-center w-full">
      <div
        class="w-full overflow-hidden shadow-md bg-white mb-[20px] rounded-b-lg"
      >
        <!-- Header con fondo degradado -->
        <div
          class="h-17 md:h-38 bg-gradient-to-r from-blue-400 to-indigo-500 relative rounded-t-lg"
        >
          <!-- Foto de perfil -->
          <div
            class="absolute left-1/5 md:left-2/5 transform -translate-x-1/2 md:-translate-x-full translate-y-1/2"
          >
            <img
              class="w-22 md:w-48 h-22 md:h-48 rounded-full border-4 border-white"
              src="https://randomuser.me/api/portraits/men/32.jpg"
              alt="Profile"
            />
            <!-- Badge del username -->
            <div
              class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 bg-blue-600 text-white px-2 py-0.5 text-sm rounded-full"
            >
              {{ "@" + user?.username }}
            </div>
          </div>
        </div>

        <!-- Info del usuario -->
        <div
          class="mt-13 md:mt-26 text-right r px-4 pb-6 gap-1.5 md:gap-3 flex flex-col"
        >
          <h2 class="text-xl font-bold">
            {{ user?.firstName }} {{ user?.lastName }}
          </h2>

          <span> {{ user?.email || "" }}</span>
          <span> {{ formattedDate }}</span>
        </div>
      </div>

      <div
        class="w-full h-[2.3px] bg-gradient-to-r from-blue-300 to-[#024d99] my-5"
      ></div>
      <div class="flex flex-col w-full h-[full] gap-5 estiliced-icon">
        <h2
          class="font-noto-serif text-xl md:text-3xl font-extrabold text-transparent bg-gradient-to-r from-blue-300 to-[#024d99] bg-clip-text"
        >
          Tu participación
        </h2>
        <section
          class="flex flex-col md:flex-row justify-center items-center w-full h-full text-center"
        >
          <div class="flex content-between w-full h-full gap-1.5 md:gap-3">
            <div
              class="p-[1px] rounded-[8px] bg-gradient-to-r from-blue-300 to-[#024d99] w-[33%]"
            >
              <div
                class="flex flex-col justify-center items-center bg-white rounded-[8px] p-2 md:p-4 w-full"
              >
                <mat-icon>forum</mat-icon
                ><span class="text-[22px] md:text-[40px] font-semibold">{{
                  statistics?.comments?.total
                }}</span
                ><span class="font-medium text-xs md:text-xl text-gray-600"
                  >Comentarios</span
                >
              </div>
            </div>

            <div
              class="p-[1px] rounded-[8px] bg-gradient-to-r from-blue-300 to-[#024d99] w-[33%]"
            >
              <div
                class="flex flex-col justify-center items-center bg-white rounded-[8px] p-2 md:p-4 w-full"
              >
                <mat-icon>thumb_up</mat-icon
                ><span class="text-[22px] md:text-[40px] font-semibold">{{
                  statistics?.likes?.total
                }}</span
                ><span class="font-medium text-xs md:text-xl text-gray-600"
                  >Me gusta</span
                >
              </div>
            </div>
            <div
              class="p-[1px] rounded-[8px] bg-gradient-to-r from-blue-300 to-[#024d99] w-[33%]"
            >
              <div
                class="flex flex-col justify-center items-center bg-white rounded-[8px] p-2 md:p-4 w-full"
              >
                <mat-icon>comment</mat-icon
                ><span class="text-[22px] md:text-[40px] font-semibold">{{
                  statistics?.posts?.total
                }}</span
                ><span class="font-medium text-xs md:text-xl text-gray-600"
                  >Discusiones</span
                >
              </div>
            </div>
          </div>
        </section>
      </div>
      <div class="flex flex-col w-full mt-2.5 gap-2.5">
        <span
          class="font-noto-serif text-xl md:text-3xl font-extrabold text-transparent bg-gradient-to-r from-blue-300 to-[#024d99] bg-clip-text"
          >Tus discusiones más recientes</span
        >
        @for (post of statistics?.lastPosts; track $index) {
        <app-discussion-card
          class="w-full"
          [item]="post"
          [userLogged]="user"
          (editEvent)="openCreateOrEditDiscussionDialog($event)"
          (deleteEvent)="openDeleteDialog($event)"
          (likeEvent)="reloadPosts()"
        ></app-discussion-card
        >}
        <span
          class="font-noto-serif text-xl md:text-3xl font-extrabold text-transparent bg-gradient-to-r from-blue-300 to-[#024d99] bg-clip-text"
          >Tus comentarios más recientes</span
        >
        @for (comment of statistics?.lastComments?.topLevelComments; track
        $index) {
        <app-comment-card
          class="w-full"
          [item]="comment"
          [userLogged]="user"
        ></app-comment-card>
        }
      </div>
    </section>
  </article>
  } @else {
  <div class="py-[15px] w-full h-full flex justify-center items-center">
    <app-loader></app-loader>
  </div>
  }
</article>
