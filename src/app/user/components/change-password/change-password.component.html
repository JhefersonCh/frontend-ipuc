<article class="brand-content-center">
  <article class="flex flex-col w-[90%] md:w-full h-full gap-5 p-5 md:p-10">
    <div>
      <p class="text-lg text-gray-600 font-medium">
        En esta sección, puedes cambiar tu contraseña.
      </p>
    </div>
    <form
      [formGroup]="changePasswordForm"
      (ngSubmit)="onChangePassword()"
      class="flex flex-col gap-5 md:gap-8"
    >
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Contraseña actual</mat-label>
        <input
          matInput
          [type]="showOldPassword ? 'text' : 'password'"
          formControlName="oldPassword"
          placeholder="Ingresa tu contraseña actual"
        />
        <mat-icon matPrefix>lock_open</mat-icon>
        <button
          matSuffix
          mat-icon-button
          type="button"
          (click)="toggleOldPasswordVisibility()"
        >
          <mat-icon>{{
            showOldPassword ? "visibility" : "visibility_off"
          }}</mat-icon>
        </button>
        <mat-error
          *ngIf="changePasswordForm.get('oldPassword')?.hasError('required')"
        >
          La contraseña actual es requerida.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Nueva contraseña</mat-label>
        <input
          matInput
          [type]="showPassword ? 'text' : 'password'"
          formControlName="newPassword"
          placeholder="Ingresa tu nueva contraseña"
        />
        <mat-icon matPrefix>lock</mat-icon>
        <button
          matSuffix
          mat-icon-button
          type="button"
          (click)="togglePasswordVisibility()"
        >
          <mat-icon>{{
            showPassword ? "visibility" : "visibility_off"
          }}</mat-icon>
        </button>
        <mat-error
          *ngIf="changePasswordForm.get('newPassword')?.hasError('required')"
        >
          La nueva contraseña es requerida.
        </mat-error>
        <mat-error
          *ngIf="
            !changePasswordForm.get('newPassword')?.hasError('required') &&
            changePasswordForm.get('newPassword')?.hasError('passwordStrength')
          "
          >La contraseña debe tener 6 caracteres, con mayúscula, minúscula y un
          carácter especial.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Confirmar nueva contraseña</mat-label>
        <input
          matInput
          [type]="showConfirmPassword ? 'text' : 'password'"
          formControlName="confirmNewPassword"
          placeholder="Confirma tu nueva contraseña"
        />
        <mat-icon matPrefix>lock</mat-icon>
        <button
          matSuffix
          mat-icon-button
          type="button"
          (click)="toggleConfirmPasswordVisibility()"
        >
          <mat-icon>{{
            showConfirmPassword ? "visibility" : "visibility_off"
          }}</mat-icon>
        </button>
        <mat-error
          *ngIf="
            changePasswordForm.get('confirmNewPassword')?.hasError('required')
          "
        >
          Es necesario confirmar tu nueva contraseña
        </mat-error>
        <mat-error *ngIf="changePasswordForm.hasError('passwordMismatch')">
          Las contraseñas no coinciden
        </mat-error>
      </mat-form-field>

      <div class="flex justify-end">
        <button mat-fab extended="true" color="primary" type="submit">
          Cambiar contraseña
        </button>
      </div>
    </form>
  </article>
</article>
