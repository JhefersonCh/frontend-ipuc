<app-base-dialog
  [title]="data?.id || null ? 'Editar comentario' : 'Crear comentario'"
>
  <ng-content form>
    <form [formGroup]="form" class="w-full flex flex-col gap-2.5">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Comentario</mat-label>
        <textarea
          matInput
          formControlName="comment"
          [maxlength]="maxLenght"
          rows="4"
        ></textarea>
        <mat-icon matPrefix>description</mat-icon>
        <mat-hint align="end" class="text-xs text-neutral-500 font-medium"
          >{{ form.get("comment")?.value?.length }}/{{ maxLenght }}</mat-hint
        >
        @if (form.get('comment')?.hasError('required')) {
        <mat-error>Comentario requerido</mat-error>
        }
      </mat-form-field>
    </form>
  </ng-content>
  <ng-content actions>
    <div class="grid grid-cols-2 gap-2 w-full md:w-1/2">
      <button
        mat-fab
        extended="true"
        color="warn"
        class="col-span-1"
        (click)="dialogRef.close()"
      >
        Cancelar
      </button>
      <button
        mat-fab
        extended="true"
        class="col-span-1"
        (click)="save()"
        [disabled]="form.invalid || loading"
      >
        Guardar
      </button>
    </div>
  </ng-content>
</app-base-dialog>
